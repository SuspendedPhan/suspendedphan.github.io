<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primitive Animator - IDE for Motion Graphics</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Primitive Animator</h1>
        <p class="subtitle">An IDE for motion graphics</p>
        <p class="description">Build motion graphics with a visual expression tree. Navigate and manipulate functions, parameters, and expressions with keyboard shortcuts.</p>
    </header>

    <main>
        <section class="hero" aria-label="Primitive Animator interface preview">
            <img src="features.png" alt="Primitive Animator interface showing visual expression editor with project files, expression tree, and canvas preview" class="hero-image" loading="eager">
        </section>

        <section class="video-section" aria-label="Primitive Animator feature demonstrations">
            <div class="video-row">
                <div class="video-container">
                    <video autoplay muted loop playsinline aria-label="Visual expression editor demonstration">
                        <source src="editor.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="video-description">
                    <h2>Visual Expression Editor</h2>
                    <p>See your animations update in real time as you edit.</p>
                </div>
            </div>

            <div class="video-row video-row-reverse">
                <div class="video-container">
                    <video autoplay muted loop playsinline aria-label="Keyboard navigation demonstration">
                        <source src="keyboard.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="video-description">
                    <h2>Keyboard-Driven Workflow</h2>
                    <p>All UI elements are accessible via keyboard navigation.</p>
                </div>
            </div>

            <div class="video-row">
                <div class="video-container">
                    <video autoplay muted loop playsinline aria-label="Flexible layout demonstration">
                        <source src="resize.mp4" type="video/mp4">
                    </video>
                </div>
                <div class="video-description">
                    <h2>Flexible Layout</h2>
                    <p>Maximize the editor or canvas, or use a multi-pane layout.</p>
                </div>
            </div>
        </section>

        <section class="features">
            <h2>Features</h2>
            
            <div class="feature-grid">
                <article class="feature-item">
                    <h3>Rich Built-In Functions</h3>
                    <p>Access math operations, drawing primitives (circles, rectangles), noise functions (Simplex 1D/2D), easing curves, time-based functions, and more. Compose them to create complex animations.</p>
                </article>

                <article class="feature-item">
                    <h3>Function and Parameter System</h3>
                    <p>Organize code into reusable functions with parameters. Move functions between files, convert expressions to functions, and build a library of reusable components.</p>
                </article>

                <article class="feature-item">
                    <h3>Multi-Project Workspace</h3>
                    <p>Manage multiple projects in one workspace. Organize code into project files and shared library files. Switch between projects quickly.</p>
                </article>

                <article class="feature-item">
                    <h3>Keyboard-Driven Workflow</h3>
                    <p>Navigate and edit with keyboard shortcuts. Use the command palette (Cmd+K) for quick actions: create functions, navigate, convert expressions, and more.</p>
                </article>

                <article class="feature-item">
                    <h3>Powerful Drawing Primitives</h3>
                    <p>Draw shapes with position, size, color (HSV), and opacity. Use system functions like <code>DrawCircle</code> and <code>DrawRectangle</code> to build visual compositions.</p>
                </article>

                <article class="feature-item">
                    <h3>Time-Based Animation</h3>
                    <p>Access the current time and use it to drive animations. Combine with easing functions and math operations to create smooth motion.</p>
                </article>

                <article class="feature-item">
                    <h3>Expression Manipulation</h3>
                    <p>Move expressions in the tree, cut and paste, convert expressions to functions or parameters, and refactor code with keyboard shortcuts.</p>
                </article>

                <article class="feature-item">
                    <h3>Project Persistence</h3>
                    <p>Projects save automatically. Export and import project data as JSON for version control and sharing.</p>
                </article>
            </div>
        </section>

        <section class="architecture">
            <h2>Architecture Overview</h2>
            
            <div class="architecture-content">
                <div class="architecture-section">
                    <h3>Technology Stack</h3>
                    <ul>
                        <li><strong>Domain logic</strong>: Haskell compiled to WebAssembly via GHC-WASM</li>
                        <li><strong>Expression evaluation</strong>: Rust compiled to WebAssembly using <code>wasm-pack</code> for high-performance expression evaluation</li>
                        <li><strong>Templates and styling</strong>: React + TypeScript with Vite build system</li>
                        <li><strong>Type Safety</strong>: End-to-end type safety via auto-generated TypeScript definitions from Haskell types</li>
                        <li><strong>Communication</strong>: WASM FFI bridge between Haskell/JavaScript and Rust/JavaScript with typed message passing</li>
                    </ul>
                </div>

                <div class="architecture-section">
                    <h3>Reactive Architecture</h3>
                    <ul>
                        <li>Selector-based data flow: React components subscribe to Haskell selectors via <code>useDh</code> hooks</li>
                        <li>Action system: UI triggers actions that execute in Haskell monadic context (<code>AppOp</code>)</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Primitive Animator</p>
    </footer>
</body>
</html>

